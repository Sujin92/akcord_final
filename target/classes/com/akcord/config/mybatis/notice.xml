<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  

<mapper namespace="com.akcord.admin.dao.NoticeDao">
	
	<insert id="noticeWrite" parameterType="noticeDto">
		insert 
		into notice(notice_id,subject,content,is_notice,reg_date,hit)
		values(seq_notice_id.nextval,#{subject},#{content},#{is_notice},sysdate,#{hit})       
	</insert>
	
	<select id="getNoticeList" resultType="noticeDto">
		select notice_id,subject,content,is_notice,reg_date,hit
		from notice	order by notice_id desc
	</select>
	
	<select id="getNoticeOrder" parameterType="String" resultType="noticeDto">
		select rownum rn,a.* from (select notice_id,subject,content,is_notice,reg_date,hit 
		from notice	
		<choose>
			<when test="str=='1'">
			order by reg_date asc) a
		</when>
			<otherwise>
				order by notice_id asc) a
			</otherwise>
		</choose>
		
	</select>
	
	<delete id="delete" parameterType="String">
		delete from notice where notice_id=#{notice_id}
	</delete>
	
	<select id="getNotice" parameterType="String" resultType="noticeDto">
		select notice_id,subject,content,is_notice,reg_date,hit
		from notice where notice_id=#{notice_id}
	</select>
	
	<update id="modify" parameterType="noticeDto">
		update notice
		set subject=#{subject},content=#{content},reg_date=sysdate
		where notice_id=#{notice_id}	
	</update>
	
	<update id="noticePublic">
		update notice set is_notice='1' where notice_id=#{notice_id}		
	</update>
</mapper>
