<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.akcord.group.dao.CommonDao">
    <select id="totalGroupListCount" parameterType="java.util.Map" resultType="int">
        select count(g.group_id)
                from users u, grouproom g, major m
                where u.user_id = g.leader_id and
                g.major_id = m.major_id
                and g.leader_id != #{myseq}
                <if test="key != '' and word != ''">
                    <if test="key == 'subject'">
                        and subject like '%' || #{word} ||'%'
                    </if>
                    <if test="key != 'subject'">
                        and ${key} = #{word}
                    </if>
                </if>
    </select>
    <select id="newGroupListCount" parameterType="java.util.Map" resultType="int">
        select count(g.group_id)
                from users u, grouproom g, major m
                where u.user_id = g.leader_id and
                g.major_id = m.major_id
                and g.leader_id != #{myseq}
                and to_char(g.reg_date, 'yymmdd') = to_char(sysdate, 'yymmdd')
    </select>
</mapper>